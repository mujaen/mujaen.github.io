---
layout: post
title: "EC2로 서버와 데이터베이스(RDS) 보안그룹 설정하기(2)"
description: "AWS + EC2 RDS 보안그룹 설정"
category: blog
tags: aws
---

<!--more-->

* this unordered seed list will be replaced by the toc
{:toc}

## EC2

들어가기에 앞서, AWS는 사용 편의성과 성능 개선을 위해 주기적으로 화면을 업데이트 하므로    
가장 최신의 포스팅을 찾아 참고하시는 것을 추천합니다. 이 포스팅은 2021년 1월 17일 기준 작성되었습니다.   
EC2는 가상 서버를 구축하고 보안 및 네트워크 구성과 스토리지 관리를 지원하죠 오늘은 EC2의 보안설정을 통해    
데이터베이스(RDS)를 보호하는 방법을 알아볼 겁니다.  

![Menu](/assets/img/2021-01-16/menu.png)

> 보안설정은 전체메뉴의 컴퓨팅 - EC2 - 네트워크 및 보안 - 보안 그룹에서 설정할 수 있습니다.


## 보안 그룹

RDS는 미리 설치되어 있다는 전제 하에 진행하도록 하겠습니다  
보안 그룹 페이지에 들어오면 현재 생성된 보안그룹 리스트를 확인할 수 있습니다.   
우측 상단의 '보안 그룹 생성' 버튼을 클릭하여 보안 그룹을 하나 만들어 보도록 하죠    

![Register Button](/assets/img/2021-01-16/register.png)  

등록 페이지로 들어오면 보안 그룹의 기본 세부 정보를 입력합니다. 저는 데이터베이스의 보안 그룹을 만들 것이므로     
보안 그룹의 이름과 간단한 설명 그리고 VPC를 선택할 겁니다.  

![Register Button](/assets/img/2021-01-17/info.png)  


### VPC

Amazon Virtual Private Cloud(VPC)를 이용하면 사용자가 정의한 가상 네트워크로 AWS 리소스를 시작할 수 있습니다.  
자세한 내용은 설명서의 [VPC](https://docs.aws.amazon.com/ko_kr/vpc/latest/userguide/what-is-amazon-vpc.html){: target="_blank"}를 참고해 주세요.  
 
### 인바운드 규칙

인바운드 규칙은 서버와 데이터베이스로 접근하는 데이터가 들어올 수 있도록 규칙을 정의하는 것입니다  
만약 외부인이 DB에 접근해서 악의적으로 데이터를 조작하게 된다면 큰 문제가 되겠죠?     
그렇기에 굉장히 중요한 작업입니다. 그럼 '규칙 추가' 버튼을 눌러 아래와 같이 추가해 보겠습니다. 

![InBound](/assets/img/2021-01-17/inbound.png)  
 
먼저, 유형은 RDS의 DB 엔진으로 지정해야 합니다 저는 MYSQL/Aurora로 만들겠습니다  
제일 중요한 소스는 데이터베이스에 접근해야 될 IP 주소를 등록해주면 됩니다    
  


### 아웃바운드 규칙

인바운드 규칙과 반대로 데이터를 서버와 데이터베이스에서 내보낼 수 있도록 규칙을 정의하는 것입니다  
아웃바운드의 경우 기본 설정된 모든 트래픽 유형 하나만 추가하면 됩니다.   

![OutBound](/assets/img/2021-01-16/outbound.png)   

하단의 '보안 그룹 생성' 버튼을 눌러주면 리스트에 새로 추가된 보안 그룹을 확인할 수 있습니다.  
그럼 이제 생성한 보안 그룹을 DB 인스턴스에 적용해 봐야겠죠? 

### DB 인스턴스

RDS를 설치하게 되면 자동으로 DB 인스턴스가 생성되는데요 해당 인스턴스에 조금 전에 설정했던     
보안 그룹을 추가하기 위해 아래의 메뉴로 이동합니다.
 
![Menu](/assets/img/2021-01-17/menu2.png)    

> DB 인스턴스 설정은 전체메뉴의 데이터베이스 - RDS - DB 인스턴스 혹은 데이터베이스에서 설정할 수 있습니다.

페이지로 이동하면 생성된 데이터베이스 리스트가 보입니다. 설정하고 싶은 데이터베이스의 좌측 체크박스를 누른 뒤  
우측의 수정 버튼을 눌러 상세페이지로 이동합니다.  

![Instance](/assets/img/2021-01-17/instance.png)

상세페이지의 연결 섹션에서 검색을 통해 새로 만든 보안 그룹을 추가해주면 보안 그룹 설정이 완료됩니다.  

